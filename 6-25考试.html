<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./6-25考试.css">
    <link rel="stylesheet" href="./layui.css" rel="stylesheet">
</head>

<body>
    <button>点击显示</button>

    <div class="box">
        <span>X</span>
        <ul>
            <li>背景颜色大全
                <div class="subnav1">
                    <span>X</span>
                </div>
            </li>
            <li>壁纸大全
                <div class="subnav2">
                    <span>X</span>
                </div>
            </li>
            <li>自定义壁纸
                <div class="subnav3">
                    <span>X</span>
                    <button type="button" class="layui-btn" id="ID-upload-demo-btn">
                        <i class="layui-icon layui-icon-upload"></i> 单图片上传
                      </button>
                      <div style="width: 132px;">
                        <div class="layui-upload-list">
                          <img class="layui-upload-img" id="ID-upload-demo-img" style="width: 100%; height: 92px;">
                          <div id="ID-upload-demo-text"></div>
                        </div>
                        <div class="layui-progress layui-progress-big" lay-showPercent="yes" lay-filter="filter-demo">
                          <div class="layui-progress-bar" lay-percent=""></div>
                        </div>
                      </div>
                      <hr style="margin: 21px 0;">
                      
                </div>
            </li>
            <li>我的收藏
                <div class="subnav4">
                    <span>X</span>
                    <h1>你好帅哥！暂时没有收藏😊</h1>
                </div>
            </li>
        </ul>
        <div class="footer"></div>
    </div>
</body>
<script src="./jquery-3.7.0.min.js"></script>
<script src="./layui.js"></script>
<script>
    $(function () {
        img()
        colorFun()
    })

    let arr = 1
    $('button').click(function () {
        $('.box').css('display', 'block')
    })
    $('span').click(function () {
        $('.box').css('display', 'none')
    })

    $('li:first').click(function () {
        $('.subnav1').css('display', 'block')
        $('.subnav3').css('display', 'none')
        $('.subnav2').css('display', 'none')
        $('.subnav4').css('display', 'none')
    })
    $('li:eq(1)').click(function () {
        $('.subnav2').css('display', 'block')
        $('.subnav1').css('display', 'none')
        $('.subnav3').css('display', 'none')
        $('.subnav4').css('display', 'none')
    })
    $('li:eq(2)').click(function () {
        $('.subnav4').css('display', 'none')
        $('.subnav3').css('display', 'block')
        $('.subnav2').css('display', 'none')
        $('.subnav1').css('display', 'none')

    })
    $('li:eq(3)').click(function () {
        $('.subnav4').css('display', 'block')
        $('.subnav3').css('display', 'none')
        $('.subnav2').css('display', 'none')
        $('.subnav1').css('display', 'none')

    })


    let color = [
        "https://img2.baidu.com/it/u=1277599156,3097465022&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=19b19826d0247884dbd873911fb72fb7",
        "https://img1.baidu.com/it/u=1935366219,1600926755&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=8b8270d4d71feddb2cbe746fe3d0cae5",
        "https://img2.baidu.com/it/u=1856217139,2592600197&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=ba1b6965121e31fc774e4d60799fca24",
        "https://img0.baidu.com/it/u=1489782107,3519116124&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=2be2b34e3f98e7b1340f3ae33fe743e8",
        "https://img1.baidu.com/it/u=671033973,1243150112&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=f745f1fbc5b10e0b1be1b56535019dfc",
        "https://img1.baidu.com/it/u=3210817148,3150249325&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=1082",
        "https://img1.baidu.com/it/u=4262801865,497791046&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=bea8429f2093771715e862d65e8fec3e",
        "https://img2.baidu.com/it/u=1136537753,1872938280&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=0742cb922ef2f73bddda60a8b4f4a79a",
        "https://img2.baidu.com/it/u=2512961321,2459079440&fm=253&app=138&size=w931&n=0&f=PNG&fmt=auto?sec=1687798800&t=753a45724ffc0428011de00a273e5b30",
        "https://img2.baidu.com/it/u=1569414381,597150743&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1687798800&t=986b7a5f1da20109bb9b8a598fd8904a",
    ]
    function colorFun() {
        let html = ''
        color.forEach((item, index) => {
            html += `
        
            <div id='mydiv' onclick="cliFun('${item}')">
            <img src='${item}' id='imgs'>
            <p>V</p>
            </div>
            `
        });
        $('.subnav1').append(html)

    }
    function cliFun(url) {
        $('body').css('background-image', `url(${url}) `);
        $('body').css('background-repeat', 'no-repeat');
    }

    let imgs = [
        'https://lmg.jj20.com/up/allimg/4k/s/02/2109250006343S5-0-lp.jpg',
        'https://lmg.jj20.com/up/allimg/4k/s/02/210924233115O14-0-lp.jpg',
        'https://img1.baidu.com/it/u=3129770633,3933811923&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500',
        'https://lmg.jj20.com/up/allimg/tp09/210H51R3313N3-0-lp.jpg',
        'https://www.ssfiction.com/wp-content/uploads/2020/08/20200731_5f248b27444f4.jpg',
        'https://img2.baidu.com/it/u=1361506290,4036378790&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500',
        'https://img0.baidu.com/it/u=1435639120,2241364006&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500',
        'https://img2.baidu.com/it/u=1956693737,1939000013&fm=253&fmt=auto&app=138&f=JPEG?w=499&h=281',
        'https://img2.baidu.com/it/u=2537370952,3446004972&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500',
        'https://img2.baidu.com/it/u=1361506290,4036378790&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500',
        'https://img2.baidu.com/it/u=2048195462,703560066&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333',
        'https://img2.baidu.com/it/u=3329909248,3799019568&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500',
        'https://img1.baidu.com/it/u=1310564963,1641173348&fm=253&fmt=auto&app=120&f=JPEG?w=1280&h=800',
        'https://img1.baidu.com/it/u=4202854243,1154414864&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=281',
        'https://img1.baidu.com/it/u=3549522664,2004387788&fm=253&fmt=auto&app=120&f=JPEG?w=1422&h=800',
        'https://img1.baidu.com/it/u=2508381239,2324251691&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500',
        'https://img0.baidu.com/it/u=3319997766,4089593231&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500',
        'https://img2.baidu.com/it/u=1577373388,3492284830&fm=253&fmt=auto&app=120&f=JPEG?w=1280&h=800',
        'https://lmg.jj20.com/up/allimg/tp08/14041124424156-lp.jpg',
        'https://img2.baidu.com/it/u=862159221,1723036925&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500',
    ]
    function img() {
        let html = ''
        imgs.forEach((item, index) => {
            html += `
        
            <div id='mydiv' onclick="cliFun('${item}')">
            <img src='${item}' id='imgs'>
            <p>V</p>
            </div>
            `
        });
        $('.subnav2').append(html)
        function cliFun(url) {
            $('body').css('background-image', `url(${url}) `);
            $('body').css('background-repeat', 'no-repeat');
            localStorage.setItem('backgroundImage', url);
        }
    }

    layui.use(function(){
  var upload = layui.upload;
  var layer = layui.layer;
  var element = layui.element;
  var $ = layui.$;
  // 单图片上传
  var uploadInst = upload.render({
    elem: '#ID-upload-demo-btn',
    url: 'https://httpbin.org/post', // 此处用的是第三方的 http 请求演示，实际使用时改成您自己的上传接口即可。
    before: function(obj){
      // 预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#ID-upload-demo-img').attr('src', result); // 图片链接（base64）
      });
      
      element.progress('filter-demo', '0%'); // 进度条复位
      layer.msg('上传中', {icon: 16, time: 0});
    },
    done: function(res){
      // 若上传失败
      if(res.code > 0){
        return layer.msg('上传失败');
      }
      // 上传成功的一些操作
      // …
      $('#ID-upload-demo-text').html(''); // 置空上传失败的状态
    },
    error: function(){
      // 演示失败状态，并实现重传
      var demoText = $('#ID-upload-demo-text');
      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
      demoText.find('.demo-reload').on('click', function(){
        uploadInst.upload();
      });
    },
    // 进度条
    progress: function(n, elem, e){
      element.progress('filter-demo', n + '%'); // 可配合 layui 进度条元素使用
      if(n == 100){
        layer.msg('上传完毕', {icon: 1});
      }
    }
  });
  
});




</script>

</html>